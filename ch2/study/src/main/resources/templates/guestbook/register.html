<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="http://code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
<meta charset="UTF-8">
    <th:block th:fragment="content">

        <h1 class="mt-4">GuestBook Register Page</h1>

        <form th:action="@{/guestbook/register}" id="form" th:method="post" th:object="${request}">
            <div class="form-group">
                <label >Title</label>
                <input type="text" class="form-control" th:name="title" placeholder="Enter Title">
            </div>
            <div class="form-group">
                <label >Content</label>
                <textarea class="form-control" rows="5" th:name="content"></textarea>
            </div>
            <div class="form-group">
                <label >Writer</label>
                <input type="text" class="form-control" th:name="writer" placeholder="Enter Writer">
            </div>

            <button type="submit" id="writeBtn" class="btn btn-primary">Submit</button>
        </form>

        <script th:inline="javascript">

            $(document).ready(function(){

                $("#btn-write").click(function() {

                    let formCheck = function() {
                        let form = document.getElementById("form");
                        if(form.title.value=="") {
                            alert("제목을 입력해 주세요.");
                            form.title.focus();
                            return false;
                        }
                        if(form.content.value=="") {
                            alert("내용을 입력해 주세요.");
                            form.content.focus();
                            return false;
                        }
                        if(form.writer.value=="") {
                            alert("내용을 입력해 주세요.");
                            form.content.focus();
                            return false;
                        }
                        return true;
                    }

                    $("#writeBtn").on("click", function(){
                        let form = $("#form");
                        form.attr("action", "/guestbook/register");
                        form.attr("method", "post");
                        if(formCheck())
                            form.submit();
                    });
                })
            });

        </script>

    </th:block>

